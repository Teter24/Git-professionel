name: IntÃ©gration Continue

on:
  push:
    branches: ["**"]
  pull_request:
    branches: [develop, main]

jobs:
  verification:
    runs-on: ubuntu-latest

    steps:
      - name: RÃ©cupÃ©ration du dÃ©pÃ´t
        uses: actions/checkout@v4

      # VÃ©rification de la structure du projet
      - name: VÃ©rification de la structure
        run: |
          echo "ğŸ” VÃ©rification des fichiers essentiels..."
          test -f README.md && echo "âœ“ README.md trouvÃ©"
          test -f pages/index.html && echo "âœ“ pages/index.html trouvÃ©"
          test -f pages/sale.html && echo "âœ“ pages/sale.html trouvÃ©"
          test -f pages/children.html && echo "âœ“ pages/children.html trouvÃ©"
          test -f js/main.js && echo "âœ“ js/main.js trouvÃ©"
          test -f js/sale.js && echo "âœ“ js/sale.js trouvÃ©"
          test -f js/children.js && echo "âœ“ js/children.js trouvÃ©"
          test -f css/style.css && echo "âœ“ css/style.css trouvÃ©"
          test -f css/sale.css && echo "âœ“ css/sale.css trouvÃ©"
          test -f css/children.css && echo "âœ“ css/children.css trouvÃ©"

      # VÃ©rification des dossiers
      - name: VÃ©rification des dossiers
        run: |
          echo "ğŸ“ VÃ©rification des dossiers..."
          test -d pages && echo "âœ“ dossier pages/ existe"
          test -d js && echo "âœ“ dossier js/ existe"
          test -d css && echo "âœ“ dossier css/ existe"
          test -d images && echo "âœ“ dossier images/ existe" || echo "âš  dossier images/ manquant"
          test -d assets/img && echo "âœ“ dossier assets/img/ existe" || echo "âš  dossier assets/img/ manquant"

      # VÃ©rification des images
      - name: VÃ©rification des images
        run: |
          echo "ğŸ–¼ï¸  VÃ©rification des images..."
          if [ -d images ]; then
            echo "Images dans le dossier images/:"
            ls -1 images | head -n 5 || echo "Aucune image trouvÃ©e"
          fi
          if [ -d assets/img ]; then
            echo "Images dans le dossier assets/img/:"
            ls -1 assets/img | head -n 5 || echo "Aucune image trouvÃ©e"
          fi

      # VÃ©rification du contenu HTML
      - name: VÃ©rification du contenu HTML
        run: |
          echo "ğŸ—ï¸  VÃ©rification du contenu HTML..."
          grep -q "logo\|Logo\|LOGO" pages/index.html && echo "âœ“ Logo trouvÃ© dans index.html"
          grep -q "header\|Header" pages/sale.html && echo "âœ“ Header trouvÃ© dans sale.html"
          grep -q "footer\|Footer" pages/children.html && echo "âœ“ Footer trouvÃ© dans children.html"

      # VÃ©rification du git
      - name: VÃ©rification du dÃ©pÃ´t Git
        run: |
          echo "ğŸ“š VÃ©rification du dÃ©pÃ´t Git..."
          git log --oneline | head -n 5 || echo "âš  Pas d'historique git"
          git branch -a | grep -E "develop|main" || echo "âš  Branches develop/main manquantes"
